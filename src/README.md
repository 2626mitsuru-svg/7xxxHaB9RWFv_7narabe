# 七並べ観戦アプリ

CPU同士の七並べ対戦を観戦できるWebアプリケーションです。

## 機能

- **観戦専用**: ユーザーは観戦のみ、CPU同士が自動対戦
- **CPU選択**: 11種類のCPUから4人を選んで対戦
- **多彩なオプション**: AKリンク、Joker、パス上限など
- **リアルタイム観戦**: 自動進行、手動進行、速度調整
- **詳細ログ**: 全ての行動を記録
- **再現性**: シード値による完全な再現

## ゲームルール

### 基本ルール
1. 52枚のトランプを4人に配布
2. 各プレイヤーの「7」を場に配置してゲーム開始
3. 手番では以下のどちらかを選択：
   - **出す**: 場にあるカードと隣接するランクのカードを出す
   - **パス**: 手番をスキップ（上限3回まで）
4. パス上限を超えると脱落
5. 最初に手札を0枚にしたプレイヤーの勝利

### オプションルール
- **AKリンク**: AとKを隣接として扱う
- **Joker**: 
  - `replace`: 置換型Joker
  - `bridge`: 橋渡し型Joker
  - `goodBad`: 良悪Joker
- **パス上限**: 1-10回まで設定可能

## CPUの特徴

各CPUは異なる性格を持ちます：

- **1主**: バランス型・やや攻撃的
- **2主**: 守備重視・ブロッカー
- **3主**: 超攻撃型・スピード重視
- **4主**: 計算型・戦略重視
- **5主**: ランダム型・予測困難
- **6主**: 炎上型・リスクテイカー
- **7主**: 慎重型・安全第一
- **8主**: 標準型・バランス重視
- **9主**: 嵐型・カオス重視
- **10主**: 演技型・相手を惑わす
- **11主**: 勝利型・勝利への執念

## 使用方法

### 1. CPU選択
- アプリ起動後、対戦する4人のCPUを選択
- 各CPUの特徴を確認してバランスよく選択
- 「ランダム選択」で自動選択も可能

### 2. ゲーム観戦
- 「ゲーム開始」でゲームスタート
- 自動再生/一時停止で観戦速度を調整
- 手動で1ターンずつ進行も可能

### 3. 設定変更
- ゲーム設定から各種オプションを調整
- シード値を指定して同じ対戦を再現

## 技術仕様

- **フレームワーク**: React + TypeScript
- **スタイリング**: Tailwind CSS
- **UI**: shadcn/ui コンポーネント
- **状態管理**: React Hooks
- **テスト**: Jest（予定）

## 開発情報

### ファイル構成
```
/
├── App.tsx              # メインコンポーネント
├── types/game.ts        # 型定義
├── utils/gameLogic.ts   # ゲームロジック
├── data/cpuPlayers.ts   # CPU情報
├── hooks/useSevenBridge.ts # 状態管理フック
├── components/
│   ├── CPUSelector.tsx     # CPU選択
│   ├── GameBoard.tsx       # ゲーム画面
│   ├── CardGrid.tsx        # カード配置グリッド
│   ├── PlayerInfo.tsx      # プレイヤー情報
│   ├── GameControls.tsx    # 操作コントロール
│   ├── GameLog.tsx         # ゲームログ
│   └── GameResult.tsx      # 結果表示
└── tests/
    └── gameLogic.test.ts   # ユニットテスト
```

### 主要関数
- `createDeck()`: デッキ作成
- `getLegalMoves()`: 合法手生成
- `evaluateMove()`: 手の評価
- `shouldPass()`: パス判断
- `makeMove()`: 手の実行

### カスタマイズ
CPU性格は `data/cpuPlayers.ts` で調整可能：
```typescript
traits: {
  aggressiveness: 1.2,  // 攻撃性
  conservativeness: 0.8, // 保守性
  blocker: 1.0,         // ブロック性向
  opener: 1.1,          // オープン性向
  // ...
}
```

## 画像システム

### 現在の状態
- **ダミー画像**: 現在はプレースホルダー画像を使用
- **自動切替**: 環境変数設定で本番画像に一発切替

### 後日Vercel配置時の手順
1. **画像準備**: `/images/01/neutral.png`, `/images/01/happy.png` などを配置
2. **環境変数設定**: `VITE_IMAGE_BASE=https://your-app.vercel.app/images`
3. **CORS設定**: `vercel.json`でCORS許可
4. **アプリ再起動**: 自動で本番画像に切替

### 表情システム
- `neutral`: 通常状態
- `happy`: 勝利・良い状況
- `thinking`: 思考中・手番
- `confident`: 残り手札少ない
- `nervous`: パス上限近い
- `surprised`: カード出し後
- `disappointed`: 脱落・敗北

## 今後の拡張予定

- [ ] より高度なAI思考
- [x] セリフ・表情システム
- [ ] 統計分析機能
- [ ] リプレイ機能
- [ ] トーナメントモード
- [ ] カスタムCPU作成

## ライセンス

MIT License